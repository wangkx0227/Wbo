<!-- 骨架屏 -->
<import src="skeleton.wxml" />
<template is="skeleton" wx:if="{{skeletonLoading}}" />
<!-- 主体 -->
<view class="page-wrapper" wx:else="{{skeletonLoading}}">
  <view class="page-head filter-bar">
    <t-row>
      <t-col span="24">
        <t-dropdown-menu>
          <t-dropdown-item options="{{dropdownArtwork.options}}" placement="right" value="{{dropdownArtwork.value}}" bindchange="onArtworkChange" />
          <t-dropdown-item options="{{dropdownSelected.options}}" placement="right" value="{{dropdownSelected.value}}" bindchange="onAssessChange" />
        </t-dropdown-menu>
      </t-col>
    </t-row>
  </view>
  <view class="page-main">
    <view class="wrapper">
      <view class="cell">
        <view class="title-font-main">
          <text>Title：Animals in sleeping bags</text>
        </view>
        <view class="title-font-other arrange-space-between">
          <text>Name：黎善玲</text>
          <text>Code：LSL__AIE MJ_2025_01</text>
        </view>
        <view class="cell-swiper">
          <t-swiper wx:if="{{swiperImages.length}}" current="{{current}}" autoplay="{{autoplay}}" duration="{{duration}}" interval="{{interval}}" navigation="{{ { type: 'dots' } }}" list="{{swiperImages}}" bind:click="onSwiperImagesTap">
          </t-swiper>
          <!-- 无数据时显示占位内容 -->
          <t-image wx:else src="" shape="round" error="slot" width="360" height="192">
            <text class="error-text" slot="error">轮播图加载失败</text>
          </t-image>
        </view>
        <view class="arrange-column">
          <text class="title-font-main">客户选稿（R1）：</text>
          <t-radio-group value="{{radioValue}}" bind:change="onRadioChange">
            <t-radio value="0" label="已选中 – Round 1" borderless />
            <t-radio value="1" label="已淘汰 – 客户未选中（R1）" borderless />
          </t-radio-group>
        </view>
        <view class="arrange-center">
          <text class="title-font-main">客户反馈评论（R1）：</text>
          <view class="arrange-center">
            <t-link size="small" content="录入" hover underline bindtap="onOpenDialog" data-id="2" />
            <t-divider layout="vertical" />
            <t-link size="small" content="查看" hover underline bindtap="onOpenPopup" data-id="2" data-comment-content="无内容" />
          </view>
        </view>
      </view>
    </view>
  </view>
  <!-- 当下拉时,进行显示的内容  -->
  <view class="loading-box loading-flex" wx:if="{{isLoadingReachMore}}">
    <!-- <text class="loading-text">加载中...</text> -->
    <t-loading theme="dots" size="60rpx" />
  </view>
  <view class="loading-box" wx:if="{{noMoreData}}">
    <text class="loading-text">-- 已经到底了 --</text>
  </view>

</view>
<!-- 轻提示 -->
<t-toast id="t-toast" />
<!-- 回到顶部 -->
<t-back-top theme="half-round" text="顶部" scroll-top="{{scrollTop}}" bind:to-top="onToTop" />
<!-- 添加个新的图稿按钮 -->
<t-fab icon="add" bind:click="onOpenAddArtwork" aria-label="增加" usingCustomNavbar draggable y-bounds="{{[0, 32]}}"></t-fab>
<!-- 查看评论弹窗-下 -->
<t-popup visible="{{popupVisible}}" bind:visible-change="onClosePopup" placement="bottom">
  <view class="popup-block">
    <view class="popup-header">
      <view class="popup-title">客户反馈评论：</view>
    </view>
    <view class="popup-comments">
      <text>{{ popupValue }}</text>
    </view>
  </view>
</t-popup>
<!-- 评论弹窗 -->
<t-dialog visible="{{dialogVisible}}" title="客户反馈评论：" confirm-btn="确定" cancel-btn="取消" bind:confirm="onCloseDialog" bind:cancel="onCloseDialog">
  <view slot="content">
    <view class="dialog-textarea">
      <t-textarea value="{{ dialogValue }}" placeholder="请输入客户反馈评论" bordered maxlength="200" disableDefaultPadding="true" indicator bind:change="onDialogInput" />
    </view>
  </view>
</t-dialog>
<!-- 增加弹窗-左 -->
<t-popup visible="{{popupAddVisible}}" placement="left">
  <view class="popup-block" style="padding: 10rpx;height: 100%;">
    <view class="popup-header">
      <view class="popup-title" style="text-align: left;">新增图稿：</view>
    </view>
    <view class="popup-comments">
      <view class="input-example">
        <view class="input-example-label"> 图稿标题 <text style=" color: red;">*</text></view>
        <t-input placeholder="请输入标题" borderless="{{true}}" class="input-example-input" />
      </view>
      <view class="input-example">
        <view class="input-example-label"> 指派设计师 <text style=" color: red;">*</text></view>
        <t-cell title="{{pickerDesignerTitile}}" arrow hover bind:click="onDesignerPicker" />
      </view>
      <view class="input-example">
        <view class="input-example-label"> 图稿编号 <text style=" color: red;">*</text></view>
        <t-input placeholder="请输入编号" borderless="{{true}}" class="input-example-input" />
      </view>
      <view class="input-example">
        <view class="input-example-label"> 上传图稿 <text style=" color: red;">*</text></view>
        <t-upload mediaType="{{['image']}}" max="{{5}}" files="{{imageFileList}}" bind:add="imageAdd" bind:remove="imageRemove">
        </t-upload>
      </view>
      <view class="button-example">
        <t-button theme="light" block  t-class="group-btn" bindtap="onCloseAddDialog">关闭</t-button>
        <t-divider layout="vertical" style="height:64rpx" />
        <t-button theme="primary" block  t-class="group-btn" bindtap="onSubmitAddDialog">提交</t-button>
      </view>
    </view>
  </view>
</t-popup>
<!-- 设计师选择框 -->
<t-picker visible="{{pickerDesignerVisible}}" value="{{pickerDesignerValue}}" title="设计师" cancelBtn="取消" confirmBtn="确认" usingCustomNavbar bindchange="onPickerDesignerChange" bindcancel="onCloseDesignerPicker">
  <t-picker-item options="{{pickerDesignerItemList}}"></t-picker-item>
</t-picker>