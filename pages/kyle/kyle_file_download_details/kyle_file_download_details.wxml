<import src="skeleton.wxml" />
<template is="skeleton" wx:if="{{skeletonLoading}}" />
<!-- 主体 -->
<view wx:else="{{skeletonLoading}}" class="page-wrapper">
  <view class="page-head filter-bar">
    <t-row>
      <t-col span="24">
        <t-dropdown-menu>
          <t-dropdown-item options="{{dropdownYear.options}}" placement="right" value="{{dropdownYear.value}}" bindchange="onYearChange" />
          <t-dropdown-item options="{{dropdownSorter.options}}" placement="right" value="{{dropdownSorter.value}}" bindchange="onStatusChange" />
        </t-dropdown-menu>
      </t-col>
    </t-row>
  </view>
  <view class="page-main">
    <view class="wrapper">
      <view class="cell" wx:for="{{Data}}" wx:key="index" wx:for-index="outerIndex">
        <view class="arrange-space-between title-font-main">
          <text>Title：{{ item.title }}</text>
        </view>
        <view class="title-font-other arrange-space-between">
          <text style="border-bottom: 1px solid currentColor;">材质：{{ item.texture }}</text>
          <text style="color: {{ item.confirmed == 4 ? 'red' : 'black' }};;">终选状态：{{ item.confirmed_text }}</text>
        </view>
        <view class="title-font-other arrange-space-between">
          <text>Name：{{ item.name }}</text>
          <text>Code：{{ item.code }}</text>
        </view>
        <view class="cell-swiper">
          <!-- <t-swiper wx:if="{{item.picture_list.length}}" autoplay="{{false}}" duration="{{500}}" navigation="{{ { type: 'dots' } }}" list="{{item.picture_list}}" bind:click="onSwiperImagesTap" data-images="{{item.picture_list}}">
          </t-swiper> -->
          <swiper wx:if="{{item.picture_list.length}}" autoplay="{{false}}" interval="3000" duration="500" circular="{{false}}" indicator-dots="{{true}}" indicator-color="#ccc" indicator-active-color="#fff" style="width: 690rpx;height:384rpx ;">
            <block wx:for="{{item.picture_list}}" wx:key="index">
              <view>{{item.url}}</view>
              <swiper-item>
                <image src="{{item}}" mode="widthFix" style="width:55%;display: block; margin: 0 auto; " data-outer-index="{{outerIndex}}" data-index="{{index}}" bindtap="onSwiperImagesTap" />
              </swiper-item>
            </block>
          </swiper>
          <!-- 9宫格遮罩层 -->
          <view class="grid-overlay" wx:if="{{item.picture_list.length}}">
            <view class="grid-cell" wx:for="{{9}}" wx:key="index"></view>
          </view>
          <!-- 无数据时显示占位内容 -->
          <t-image wx:else src="" shape="round" error="slot" width="690rpx" height="384rpx">
            <text class="error-text" slot="error">图片加载失败</text>
          </t-image>
        </view>
        <!-- shelley审核与FMR审核 -->
        <view class="arrange-center">
          <view class="arrange-center title-font-other">
            <text class="title-font-main">Shelley可行性：</text>
            <text>{{ item.confirmed2_text }}</text>
          </view>
          <t-divider layout="vertical" />
          <view class="arrange-center title-font-other">
            <text class="title-font-main">FMR可行性：</text>
            <text>{{ item.fmr2_text }}</text>
          </view>
        </view>
        <!-- 最终评论 -->
        <view class="arrange-center">
          <view class="arrange-center title-font-other">
            <text class="title-font-main">终审评论：</text>
            <t-link size="small" content="点击评论" hover underline suffixIcon="chat-message" variant="outline" bind:tap="onOpenDialog" data-timeline-id="{{ item.timeline_id }}" data-task-id="{{ item.id }}" data-confirmed="{{ item.confirmed }}" />
          </view>
          <t-divider layout="vertical" />
          <view class="arrange-center title-font-other">
            <text class="title-font-main">时间线：</text>
            <t-link size="small" content="查看历史时间线" hover underline variant="outline" bind:tap="onOpenHistoryTimeLine" data-task-id="{{ item.id }}" />
          </view>
        </view>
        <!-- 终审 -->
        <view class="arrange-center title-font-other">
          <text class="title-font-main">操作：</text>
          <t-link size="small" content="舍弃" data-content-status="N" hover underline theme="danger" bindtap="onModifyArtworkStatus" data-timelineid="{{ item.timeline_id }}" />
          <t-divider layout="vertical" />
          <t-link size="small" content="保留" data-content-status="Y" hover underline bindtap="onModifyArtworkStatus" data-timelineid="{{ item.timeline_id }}" />
        </view>
      </view>
    </view>
  </view>
  <!-- 当下拉时,进行显示的内容  -->
  <view class="loading-box loading-flex" wx:if="{{isLoadingReachMore}}">
    <!-- <text class="loading-text">加载中...</text> -->
    <t-loading theme="dots" size="60rpx" />
  </view>
  <view class="loading-box" wx:if="{{noMoreData}}">
    <text class="loading-text">-- 已经到底了 --</text>
  </view>

</view>
<!-- 轻提示 -->
<t-toast id="t-toast" />
<!-- 回到顶部 -->
<t-back-top theme="half-round" text="顶部" scroll-top="{{scrollTop}}" bind:to-top="onToTop" />